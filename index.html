<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=480">
    <title>81 Place</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <script type="module" src="main.js"></script>
    <div id="game_area"></div>
    <div id="hi_score" class="hi_score"></div>
    <div class="rule_tit" id="rule_tit_but"></div>
    <div class="rule_book" id="rule_book_div">
      <p>　ハチワン・プレース は基本的にただの <a href="https://ja.wikipedia.org/wiki/%E6%95%B0%E7%8B%AC" target="_blank" rel="noopener noreferrer">ナンプレ（数独）</a> で、START をクリックするとゲームが始まります。ただし、このソフトウェアはプレイヤーの腕前を評価します。</p>
      <p>　———目指せ１０万点。</p>
      <p>　あなたの頭脳の優秀さは次のように計算されます：</p>
      <p style="text-align:center;font-weight:bold">スコア ＝ 基礎点 ＋ タイムボーナス</p>
      <p style="text-align:center;font-weight:bold">タイムボーナス ＝ 基礎点 − ( クリア時間 ÷ 50 )</p>
      <p>　クリア時間はナンプレを解くのに使った時間で、単位はミリ秒です。ただし、時間をかけすぎて負の値になった場合ボーナスは０点です。</p>
      <h4>■ 基礎点とは</h4>
      <p>　あなたにはゲームの最初に８１手番の「ターン数」が与えられ、パズルに数字を記入するたびにターン数が減ります。</p>
      </p>　そして基礎点は、</p>
      <p style="text-align:center;font-weight:bold">pt ＝ ターン数 × 書き込んだ数字の三角数</p>
      <p>のように計算した pt の合計点です。</p>
      <p>　三角数とは「 n × (n + 1) ÷ 2 」で計算される値です。</p>
      <table class="hyo">
        <tr>
          <td>書き込んだ数字</td>
          <td>１</td><td>２</td><td>３</td>
          <td>４</td><td>５</td><td>６</td>
          <td>７</td><td>８</td><td>９</td>
        </tr>
        <tr>
          <td>三角数</td>
          <td>1</td><td>3</td><td>6</td>
          <td>10</td><td>15</td><td>21</td>
          <td>28</td><td>36</td><td>45</td>
        </tr>
      </table>
      <p>　例えば最初に書き込んだ数字が９ならターン数は８１なので、</p>
      <p style="text-align:center;font-weight:bold">(9 × (9 ＋ 1) ÷ 2) × 81 ＝ 45 × 81 ＝ 3,645点</p>
      <p>になります。</p>
      <p>　ところが最初に見つけた数字が２なら「(2 × (2 ＋ 1) ÷ 2) × 81 ＝ 3 × 81 ＝ 243点」にしかなりません。<b>１５倍</b>も違います。</p>
      <p>　また、あなたが２０ターン目に９を見つけてもそのときのターン数は 81 − 20 ＝ 61 ですから「(9 × (9 ＋ 1) ÷ 2) × <b>61</b> ＝ 45 × 61 ＝ 2,745点」に減ります。</p>
      <p>　数独アプリは世に数多ありますが、ただのナンプレに <b>なるべく早く９や８などの大きな数字を見つける</b> という要素を加えてみたのがこのゲームの主張です。</p>
      <p>　なお、「書き込んだ数字」は正解の数字でなければなりません。不正解の場合はターン数だけが減少し、そのターンの得点は０点になってしまいます。<p>
      <p>　同じマス目に何度も記入した場合は最後に記入した数字だけが得点します。ターン数は書き込むたびに減って行くので一発で正解するほうが得だということです。</p>
      <p>　基礎点の理論的な最大値は 87,615点 ですが、これはヒント無しの８１マスすべてを埋めたときの数です。ヒントでマス目が消費される以上、現実には７万点程度が限界でしょう。</p>
      <p>　ボーナスについては、</p>
      <p style="text-align:center;font-weight:bold">t ÷ 50 ＝ 87,615pt</p>
      <p style="text-align:center;font-weight:bold">t ＝ 4,380,750ms</p>
      <p>より、長くても <b>１時間１３分</b> でボーナスが無くなるとわかります。</p>
      <p>　ヒントマスがある以上実際の猶予はもっと短くなりますから、概ね４５分を超えたらボーナスは無いと考えましょう。</p>
      <p>　——約７万の基礎点とタイム・ボーナスを稼ぎ、<b>スコア１０万点超え</b> を達成してください。</p>
      <p>　達成できたら目標点は１万ずつ増え、<b>１２万点</b> に大きな壁があります。あなたは１２万点を超えられるでしょうか。</p>
      <h4>■ ゲーム画面の説明</h4>
      <p>　ゲーム画面の右上に表示された「START」を押すとゲームが始まります。</p>
      <p>　問題画面は単純なアルゴリズムによって作られていて、解が唯一の問題を作ります。</p>
      <p>　問題は常に仮定法を使わずに解けます。解けない時は、「１〜９の数字のうち、今、このマスに入ることができるのはｎだけ」という考え方を暗算しましょう。アルゴリズム的に必ず解けます。高等テクニックとされる x-wing 等は利用していません。</p>
      <h4>■ 書き込む数字の選択</h4>
      <p>　ゲームがスタートした後は、問題画面下部のリストから入力したい数字を選びます。その数字のキーボードを押すことでも選択できます。A キーを入力すると数字がひとつ増え、D キーで減らすこともできます。入力したい場所をクリックすることで選んだナンバーを記入でき、画面に９個記入された選択肢は暗くなります。</p>
      <p>　⌫ は消しゴムで、書き損じたマスに空白を入力します。空白でも書き込めばターン数を消費します ：）</p>
      <p>　画面上にある選択した数字と矛盾するマスは灰色で強調されます。このヒントが邪魔、または邪道と感じるときは次のチェックボックスを有効にしてください。</p>
      <input type="checkbox" id="show_hint"><label for="show_hint">ハイライトを無効にする</label>
      <p>　他の数字と矛盾する記入をするとその数字が赤くなります。</p>
      <p>　すべてのマス目が数字で埋められ、しかもすべてが正解であれば「おめでとう」というメッセージとともに得点が通知されます。</p>
      <p>　ゲームを一度でもクリアするとこれまでのスコア表が出現します。</p>
      <h4>■ タイマの停止</h4>
      <p>　問題画面のタイトル部分の「８１」は残りターン数を表していますが、ゲーム中にこの部分をクリックすると表示が PAUSE に変わり一時停止できます。</p>
      <p>　ゲームをクリアした後に新しい問題を始めたいときもタイトル部分（その時は得点が表示されています）をクリックしてください。新しいゲームが始まります。</p>
      <h4>■ 問題を保存する</h4>
      <p>　ゲームが開始されると「START」はゲームIDに変化します。これは同じ盤面を表示するための鍵で、ゲーム中にID部分をクリックするとクリップボードにコピーできます。</p>
      <p>　URLではなくIDのみをメモした場合は次のフォームに入力してください。初期表示はサンプルのIDです。</p>
      <form action="/" style="text-align:center">
        <input type="text" value="S6B5A8F9" name="id">
        <input type="submit" value="Play">
        <p style="font-size: 0.8em">※空白等を入れないよう注意してください。</p>
      </form>
      <p>　URLについたIDを無くし、素の状態でこのページを開きたいときは <a href="/">こちら</a> をクリックしてください。</p>
      <p style="text-align:center;font-weight:bold"><a href="https://github.com/hoeg1/81place" target="_blank" rel="noopener noreferrer">source code</a></p>
    </div>
  </body>
</html>

